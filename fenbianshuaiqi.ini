[custom]
;===============================================
; SubConverter 订阅转换配置文件
; 用于将机场订阅转换为 Clash 配置
;===============================================

;================= 分流规则定义 =================
; 规则格式：ruleset=策略组名,[]规则类型,规则内容,选项
; 规则类型：DOMAIN-SUFFIX(域名后缀), IP-CIDR(IP段), DOMAIN-KEYWORD(域名关键词)

; 内网直连规则 - 确保局域网流量不走代理
ruleset=🏠 内网直连,[]DOMAIN-SUFFIX,local
ruleset=🏠 内网直连,[]IP-CIDR,10.0.0.0/8,no-resolve         ; 私有网络A类
ruleset=🏠 内网直连,[]IP-CIDR,172.16.0.0/12,no-resolve      ; 私有网络B类  
ruleset=🏠 内网直连,[]IP-CIDR,192.168.0.0/16,no-resolve     ; 私有网络C类
ruleset=🏠 内网直连,[]IP-CIDR,127.0.0.0/8,no-resolve        ; 本地回环地址

; YouTube专用规则 - 优化视频流媒体体验
ruleset=📹 YOUTUBE,[]DOMAIN-SUFFIX,youtube.com              ; YouTube主域名
ruleset=📹 YOUTUBE,[]DOMAIN-SUFFIX,googlevideo.com          ; YouTube视频CDN
ruleset=📹 YOUTUBE,[]DOMAIN-SUFFIX,youtube-nocookie.com     ; YouTube嵌入域名
ruleset=📹 YOUTUBE,[]DOMAIN-SUFFIX,youtubeusercontent.com   ; YouTube内容域名
ruleset=📹 YOUTUBE,[]DOMAIN-KEYWORD,youtube                 ; 包含youtube的域名
ruleset=📹 YOUTUBE,[]IP-CIDR,172.110.32.0/21,no-resolve     ; YouTube IP段1
ruleset=📹 YOUTUBE,[]IP-CIDR,216.73.80.0/20,no-resolve      ; YouTube IP段2
ruleset=📹 YOUTUBE,[]IP-CIDR,142.250.0.0/16,no-resolve      ; Google/YouTube IP段
; 额外添加的规则（可能是误添加的，建议检查）
ruleset=📹 YOUTUBE,[]DOMAIN-KEYWORD,teams.microsoft.com     ; Microsoft Teams
ruleset=📹 YOUTUBE,[]DOMAIN-SUFFIX,teams.microsoft.com
ruleset=📹 YOUTUBE,[]DOMAIN-SUFFIX,1ioqq7.captcha-open.aliyuncs.com ; 阿里云验证码

; OpenAI/AI工具规则 - 专用于AI服务
ruleset=🤖 openai,[]DOMAIN-KEYWORD,chatgpt                  ; ChatGPT相关
ruleset=🤖 openai,[]IP-CIDR,104.18.0.0/16,no-resolve        ; Cloudflare IP段(OpenAI使用)
ruleset=🤖 openai,[]IP-CIDR,160.79.0.0/16,no-resolve        ; OpenAI IP段
ruleset=🤖 openai,[]DOMAIN-KEYWORD,cursor                   ; Cursor编辑器
ruleset=🤖 openai,[]IP-CIDR,107.148.47.3/32,no-resolve      ; 特定AI服务IP
ruleset=🤖 openai,[]DOMAIN-KEYWORD,claude                   ; Claude AI

; 远程桌面规则 - Splashtop远程控制
ruleset=🖥️ splashtop,[]DOMAIN-KEYWORD,splashtop

; 兜底规则 - 所有其他流量都走香港家庭宽带
ruleset=🇭🇰 家庭香港,[]FINAL

;================== 策略组定义 ==================
; 策略组格式：custom_proxy_group=组名`类型`节点选择规则

; 家庭香港组 - 包含五个机场分组 + 特定地区节点
; 优先显示机场分组，方便快速选择，然后是按地区筛选的节点
custom_proxy_group=🇭🇰 家庭香港`select`[]🐶 狗狗云`[]🌲 树洞云`[]⚡ 专线云`[]🚀 火箭云`[]🌙 白月光`(?i)(香港|Hong|hk|韩国|korea|kr|新加坡|singapore|sg)

; 应用专用组 - 可手动选择不同机场或让用户手动选择
custom_proxy_group=📹 YOUTUBE`select`[]🇭🇰 家庭香港`[]🐶 狗狗云`[]🌲 树洞云`[]⚡ 专线云`[]🚀 火箭云`[]🌙 白月光`.*
custom_proxy_group=🤖 openai`select`[]🇭🇰 家庭香港`[]🐶 狗狗云`[]🌲 树洞云`[]⚡ 专线云`[]🚀 火箭云`[]🌙 白月光`.*
custom_proxy_group=🖥️ splashtop`select`[]🇭🇰 家庭香港`[]🐶 狗狗云`[]🌲 树洞云`[]⚡ 专线云`[]🚀 火箭云`[]🌙 白月光`.*

; 机场分组 - 按不同机场服务商分类节点
; 狗狗云：匹配包含丨或|但排除专线和PV标识的节点
custom_proxy_group=🐶 狗狗云`select`(?=.*(丨|\|))(?!.*专线)(?!.*PV).*

; 树洞云：匹配包含Basic或Pro的节点
custom_proxy_group=🌲 树洞云`select`(?=.*(Basic|Pro)).*

; 专线云：匹配包含专线或PV标识的节点
custom_proxy_group=⚡ 专线云`select`(?=.*(专线|PV)).*

; 火箭云：匹配包含VIP隧道的节点  
custom_proxy_group=🚀 火箭云`select`(?=.*VIP隧道).*

; 白月光：匹配纯文本格式的节点（排除其他机场特征）
custom_proxy_group=🌙 白月光`select`^(?!.*(?:丨|\||Basic|Pro|专线|PV|VIP隧道)).*(?:香港 \d+|台湾 \d+|日本 \d+|新加坡 \d+|美国 \d+|加拿大|韩国|越南|柬埔寨|马来西亚|泰国|印度|尼泊尔|菲律宾|印度尼西亚|澳大利亚|新西兰|德国|法国|瑞士|英国|爱尔兰|冰岛|波兰|意大利|西班牙|荷兰|芬兰|奥地利|立陶宛|瑞典|希腊|拉脱维亚|挪威|丹麦|比利时|卢森堡|马其顿|亚美尼亚|阿尔巴尼亚|格鲁吉亚|葡萄牙|乌克兰|摩尔多瓦|爱沙尼亚|克罗地亚|罗马尼亚|俄罗斯|保加利亚|土耳其|塞尔维亚|埃及|尼日利亚|摩洛哥|南非|沙特阿拉伯|伊拉克|以色列|塞浦路斯|阿曼|阿拉伯联合酋长国|卡塔尔|巴基斯坦|乌兹别克斯坦|哈萨克斯坦|阿根廷|秘鲁|哥伦比亚|危地马拉|厄瓜多尔|哥斯达黎加|墨西哥|智利|玻利维亚|乌拉圭|巴西)$

; 内网直连组 - 内网流量直接连接，不走代理
custom_proxy_group=🏠 内网直连`select`[]DIRECT

;================== 转换器配置 ==================
; 启用规则集生成器
enable_rule_generator=true

; 覆盖原始规则（确保使用自定义规则）
overwrite_original_rules=true

;================== 基础配置文件 ==================
; clash_rule_base: 指定Clash基础配置模板文件
; 这个URL指向的YAML文件包含：
; - 基础网络参数（端口、DNS等）
; - 防DNS泄露设置  
; - 通用的Clash运行配置
; - 不包含具体的节点和规则（由上面的配置生成）
clash_rule_base=https://raw.githubusercontent.com/vetus2/shuaishuai21313123/refs/heads/main/GeneralClashConfig.yml

;================== 重要说明 ==================
; 1. 全代理模式：
;    - 除了内网地址，所有流量都通过代理
;    - 不会有任何流量直连到国内服务器
;    - 有效防止IP地址和DNS泄露
;
; 2. 防泄露机制：
;    - 基础配置文件中DNS配置被禁用
;    - 所有DNS查询通过代理服务器
;    - 内网流量直连，外网流量全部代理
;
; 3. 节点分组逻辑：
;    - 根据节点名称特征自动分类到不同机场
;    - 避免节点重复出现在多个组中
;    - 方便用户根据需求选择不同机场
;
; 4. 使用建议：
;    - YouTube等流媒体建议使用家庭宽带线路
;    - AI工具可能需要特定地区节点
;    - 一般浏览可以使用任意节点
